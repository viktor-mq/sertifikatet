{% extends "base.html" %}

{% block title %}Oppgrader til {{ plan.display_name }} - Sertifikatet{% endblock %}

{% block content %}
<section class="py-12">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold mb-4">
                <span class="bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                    Oppgrader til {{ plan.display_name }}
                </span>
            </h1>
            <p class="text-xl text-gray-400">
                Lås opp alle funksjonene for optimal teoritest forberedelse
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Plan Details -->
            <div class="glass rounded-2xl p-8">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold">{{ plan.display_name }}</h2>
                    <div class="text-4xl font-bold my-4">
                        {{ plan.price_nok|int }} <span class="text-lg text-gray-400">NOK</span>
                    </div>
                    <p class="text-gray-400">per måned</p>
                </div>

                <!-- Plan Features -->
                <div class="space-y-4">
                    {% if plan.name == 'premium' %}
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>Ubegrensede quiz og eksamener</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>Tilgang til alle instruksjonsvideoer</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>Detaljert statistikk og fremgangssporing</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>AI-tilpasset læring</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>Ingen annonser</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>Prioritert kundesupport</span>
                    </div>
                    {% elif plan.name == 'pro' %}
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>Alt fra Premium plan</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>Offline modus for quiz og videoer</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>Personlig AI-veileder</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>Avansert analyse og innsikt</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>Eksklusiv innhold og funksjoner</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-400 mr-3"></i>
                        <span>24/7 premium support</span>
                    </div>
                    {% endif %}
                </div>

                <!-- Guarantee -->
                <div class="mt-8 p-4 bg-green-600/10 border border-green-600/20 rounded-lg">
                    <div class="flex items-center">
                        <i class="fas fa-shield-alt text-green-400 mr-3"></i>
                        <div>
                            <h4 class="font-semibold text-green-400">14 dagers pengene-tilbake-garanti</h4>
                            <p class="text-sm text-gray-400">Ikke fornøyd? Få full refusjon innen 14 dager.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Checkout Form -->
            <div class="glass rounded-2xl p-8">
                <h3 class="text-xl font-bold mb-6">Fullfør Oppgradering</h3>
                
                <form action="{{ url_for('subscription.checkout', plan_name=plan.name) }}" method="POST" id="checkoutForm">
                    <!-- Payment Method -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-3">Betalingsmetode</label>
                        <div class="space-y-3">
                            <label class="flex items-center p-4 border border-gray-700 rounded-lg cursor-pointer hover:border-purple-500 transition">
                                <input type="radio" name="payment_method" value="card" checked class="mr-3">
                                <i class="fas fa-credit-card mr-3 text-blue-400"></i>
                                <span>Kort (Visa, Mastercard)</span>
                            </label>
                            <label class="flex items-center p-4 border border-gray-700 rounded-lg cursor-pointer hover:border-purple-500 transition">
                                <input type="radio" name="payment_method" value="vipps" class="mr-3">
                                <i class="fas fa-mobile-alt mr-3 text-orange-400"></i>
                                <span>Vipps</span>
                            </label>
                        </div>
                    </div>

                    <!-- Order Summary -->
                    <div class="mb-6 p-4 bg-gray-800/50 rounded-lg">
                        <h4 class="font-semibold mb-3">Ordresammendrag</h4>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span>{{ plan.display_name }} (1 måned)</span>
                                <span>{{ plan.price_nok|int }} NOK</span>
                            </div>
                            <hr class="border-gray-700">
                            <div class="flex justify-between font-bold text-lg">
                                <span>Total</span>
                                <span>{{ plan.price_nok|int }} NOK</span>
                            </div>
                        </div>
                    </div>

                    <!-- Terms and Conditions -->
                    <div class="mb-6">
                        <label class="flex items-start">
                            <input type="checkbox" name="terms_accepted" required class="mt-1 mr-3">
                            <span class="text-sm text-gray-400">
                                Jeg godtar vilkårene og personvernpolitikken. 
                                Abonnementet fornyes automatisk hver måned.
                            </span>
                        </label>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" 
                            class="w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg text-lg font-bold hover:from-purple-700 hover:to-pink-700 transition">
                        <i class="fas fa-lock mr-2"></i>
                        Betal Trygt {{ plan.price_nok|int }} NOK
                    </button>
                </form>

                <!-- Security Notice -->
                <div class="mt-6 flex items-center justify-center text-sm text-gray-400">
                    <i class="fas fa-shield-alt mr-2"></i>
                    <span>Sikker betaling med 256-bit SSL kryptering</span>
                </div>
            </div>
        </div>

        <!-- Benefits Highlight -->
        <div class="mt-12 glass rounded-2xl p-8">
            <h2 class="text-xl font-bold mb-6 text-center">Hvorfor oppgradere?</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="text-center">
                    <div class="w-16 h-16 bg-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-infinity text-purple-400 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold mb-2">Ubegrensede Quiz</h3>
                    <p class="text-sm text-gray-400">Ta så mange quiz og prøveeksamener du ønsker</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-green-600/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-video text-green-400 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold mb-2">Premium Innhold</h3>
                    <p class="text-sm text-gray-400">Tilgang til alle instruksjonsvideoer og eksklusivt innhold</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-600/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-chart-line text-blue-400 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold mb-2">Detaljert Analyse</h3>
                    <p class="text-sm text-gray-400">Få dybdeinnsikt i din fremgang og svake punkter</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
